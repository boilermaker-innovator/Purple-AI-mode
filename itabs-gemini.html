
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iTabs Generator - FREE AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        
        .form-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        
        input[type="text"],
        input[type="url"],
        input[type="file"],
        input[type="password"],
        textarea,
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: Arial, sans-serif;
        }
        
        input[type="file"] {
            padding: 8px;
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        small {
            color: #666;
            display: block;
            margin-top: 5px;
            font-size: 12px;
        }
        
        .or-divider {
            text-align: center;
            margin: 15px 0;
            color: #999;
            font-style: italic;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-generate {
            background: #4CAF50;
            color: white;
            flex: 1;
        }
        
        .btn-generate:hover:not(:disabled) {
            background: #45a049;
        }

        .btn-ai-generate {
            background: #4285F4;
            color: white;
            flex: 1;
        }

        .btn-ai-generate:hover:not(:disabled) {
            background: #357AE8;
        }
        
        .btn-clear {
            background: #f44336;
            color: white;
        }
        
        .btn-clear:hover {
            background: #da190b;
        }
        
        .btn-copy {
            background: #2196F3;
            color: white;
            width: 100%;
        }
        
        .btn-copy:hover {
            background: #0b7dda;
        }
        
        .preview-section {
            display: none;
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .preview-section.active {
            display: block;
        }
        
        .preview-container {
            position: relative;
            display: inline-block;
            margin: 20px 0;
        }
        
        .preview-image {
            max-width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
        }
        
        .preview-overlay {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 18px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            padding: 10px;
            z-index: 10;
            display: none;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 90%;
        }
        
        .preview-overlay.show {
            display: block;
        }
        
        .preview-overlay.top {
            top: 10px;
        }
        
        .preview-overlay.center {
            top: 50%;
            transform: translate(-50%, -50%);
        }
        
        .preview-overlay.bottom {
            bottom: 10px;
        }
        
        .itabs-button {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: rgba(33, 150, 243, 0.9);
            color: white;
            border: 2px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            transition: transform 0.2s;
            z-index: 20;
        }
        
        .itabs-button:hover {
            transform: scale(1.1);
        }
        
        .itabs-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .itabs-popup.active {
            display: flex;
        }
        
        .popup-content {
            background: white;
            border-radius: 8px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        .popup-close {
            position: sticky;
            top: 0;
            background: white;
            padding: 15px;
            border-bottom: 1px solid #eee;
            text-align: right;
            z-index: 1;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: auto;
        }
        
        .popup-section {
            padding: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .popup-section:last-child {
            border-bottom: none;
        }
        
        .popup-section h3 {
            color: #2196F3;
            margin-bottom: 10px;
        }
        
        .popup-section p {
            color: #333;
            line-height: 1.6;
        }
        
        .popup-button {
            display: block;
            width: calc(100% - 40px);
            margin: 20px;
            padding: 15px;
            background: #4CAF50;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .popup-button:hover {
            background: #45a049;
        }
        
        .code-section {
            margin-top: 20px;
        }
        
        .code-box {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 10px;
            word-wrap: break-word;
            white-space: pre-wrap;
        }
        
        .success-message {
            display: none;
            background: #4CAF50;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            text-align: center;
        }
        
        .success-message.active {
            display: block;
        }

        .warning-message {
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }

        .error-message {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            display: none;
        }

        .error-message.active {
            display: block;
        }

        .file-status {
            color: #28a745;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .file-status.show {
            display: block;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .loading.active {
            display: block;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4285F4;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .ai-section {
            background: #E8F0FE;
            border: 2px solid #4285F4;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .ai-section h3 {
            color: #4285F4;
            margin-bottom: 15px;
        }

        .free-badge {
            background: #4CAF50;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>iTabs Generator - FREE AI <span class="free-badge">100% FREE</span></h1>
    <p class="subtitle">Create your information popup in seconds with Google's FREE AI</p>

    <div class="form-section ai-section">
        <h3>🤖 AI Mode - Instant iTabs Generation (NO PAYMENT NEEDED!)</h3>
        
        <div class="form-group">
            <label for="campaignUrl">Paste Campaign/Product URL:</label>
            <input type="url" id="campaignUrl" placeholder="https://www.birchal.com/company/your-campaign">
            <small>Paste any Birchal campaign, Kickstarter, product page, or website URL</small>
        </div>

        <div class="form-group">
            <label for="apiKey">Your Google API Key (FREE):</label>
            <input type="password" id="apiKey" placeholder="Get free key from ai.google.dev">
            <small>Get your FREE API key from <a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com/app/apikey</a> - No credit card needed!</small>
        </div>

        <div class="form-group">
            <label for="imageUrl">Product Image URL:</label>
            <input type="url" id="imageUrl" placeholder="https://i.ibb.co/your-image.jpg">
            <small>Paste the URL of your main product image</small>
        </div>

        <div class="button-group">
            <button class="btn-ai-generate" id="aiGenerateBtn">✨ Generate with FREE AI</button>
        </div>

        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p id="loadingText">Reading campaign page...</p>
        </div>

        <div class="error-message" id="errorMessage"></div>
    </div>

    <div class="or-divider">- OR MANUAL MODE -</div>

    <div class="form-section">
        <h2>Build Your iTabs Manually</h2>
        
        <div class="form-group">
            <label for="imageFile">Upload Product Image:</label>
            <input type="file" id="imageFile" accept="image/*">
            <small>Choose an image from your device</small>
            <div id="fileStatus" class="file-status">✓ Image loaded and ready</div>
        </div>

        <div class="warning-message" id="imageWarning" style="display: none;">
            Note: Uploaded images will work in preview, but for the final code to work on your website, you'll need to upload your image to an image hosting service and use that URL.
        </div>
        
        <div class="form-group">
            <label for="overlayText">Overlay Text (Optional):</label>
            <input type="text" id="overlayText" placeholder="e.g., Click the i for more info" value="Click the i for more info">
            <small>Short text that appears on the image - leave blank for no overlay</small>
        </div>

        <div class="form-group">
            <label for="overlayPosition">Overlay Position:</label>
            <select id="overlayPosition">
                <option value="top">Top</option>
                <option value="center" selected>Center</option>
                <option value="bottom">Bottom</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="section1">What is it?</label>
            <textarea id="section1" placeholder="AI will fill this automatically, or you can write it yourself"></textarea>
        </div>
        
        <div class="form-group">
            <label for="section2">Why do I need it?</label>
            <textarea id="section2" placeholder="AI will fill this automatically, or you can write it yourself"></textarea>
        </div>
        
        <div class="form-group">
            <label for="section3">How does it work?</label>
            <textarea id="section3" placeholder="AI will fill this automatically, or you can write it yourself"></textarea>
        </div>
        
        <div class="form-group">
            <label for="section4">What makes it different?</label>
            <textarea id="section4" placeholder="AI will fill this automatically, or you can write it yourself"></textarea>
        </div>
        
        <div class="form-group">
            <label for="buttonText">Button Text:</label>
            <input type="text" id="buttonText" value="Learn More">
        </div>
        
        <div class="form-group">
            <label for="buttonLink">Button Links To:</label>
            <input type="url" id="buttonLink" placeholder="https://your-website.com">
        </div>
        
        <div class="button-group">
            <button class="btn-generate" id="generateBtn">Generate iTabs Code</button>
            <button class="btn-clear" id="clearBtn">Clear Form</button>
        </div>
    </div>

    <div class="preview-section" id="previewSection">
        <h2>Preview Your iTabs</h2>
        <p style="color: #666; margin-bottom: 20px;">Click the "i" button to test your popup</p>
        
        <div class="preview-container" id="previewContainer">
            <img id="previewImage" class="preview-image" src="" alt="Product">
            <div id="previewOverlay" class="preview-overlay"></div>
            <div class="itabs-button" id="previewItabsBtn">i</div>
        </div>
        
        <div class="code-section">
            <h3>Your iTabs Code</h3>
            <p style="color: #666; margin-bottom: 10px;">Copy this code and paste it on your website:</p>
            <div class="code-box" id="codeBox"></div>
            <button class="btn-copy" id="copyBtn">Copy Code</button>
            <div class="success-message" id="successMessage">Code copied to clipboard!</div>
        </div>
    </div>

    <div class="itabs-popup" id="itabsPopup">
        <div class="popup-content" id="popupContent">
            <div class="popup-close">
                <button class="close-btn" id="closeBtn">&times;</button>
            </div>
            <div class="popup-section">
                <h3>What is it?</h3>
                <p id="popupSection1"></p>
            </div>
            <div class="popup-section">
                <h3>Why do I need it?</h3>
                <p id="popupSection2"></p>
            </div>
            <div class="popup-section">
                <h3>How does it work?</h3>
                <p id="popupSection3"></p>
            </div>
            <div class="popup-section">
                <h3>What makes it different?</h3>
                <p id="popupSection4"></p>
            </div>
            const geminiUrl = `https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`;
        </div>
    </div>

    <script>
        let uploadedImageData = null;

        document.addEventListener('DOMContentLoaded', function() {
            const generateBtn = document.getElementById('generateBtn');
            const aiGenerateBtn = document.getElementById('aiGenerateBtn');
            const clearBtn = document.getElementById('clearBtn');
            const copyBtn = document.getElementById('copyBtn');
            const previewItabsBtn = document.getElementById('previewItabsBtn');
            const closeBtn = document.getElementById('closeBtn');
            const itabsPopup = document.getElementById('itabsPopup');
            const popupContent = document.getElementById('popupContent');
            const imageFile = document.getElementById('imageFile');
            const imageUrl = document.getElementById('imageUrl');
            const fileStatus = document.getElementById('fileStatus');
            
            generateBtn.addEventListener('click', generatePreview);
            aiGenerateBtn.addEventListener('click', aiGenerate);
            clearBtn.addEventListener('click', clearForm);
            copyBtn.addEventListener('click', copyCode);
            previewItabsBtn.addEventListener('click', openPopup);
            closeBtn.addEventListener('click', closePopup);
            
            imageFile.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file && file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        uploadedImageData = event.target.result;
                        fileStatus.classList.add('show');
                        document.getElementById('imageUrl').value = '';
                    };
                    reader.readAsDataURL(file);
                } else {
                    alert('Please select a valid image file');
                    imageFile.value = '';
                }
            });

            imageUrl.addEventListener('input', function() {
                if (imageUrl.value.trim() !== '') {
                    imageFile.value = '';
                    uploadedImageData = null;
                    fileStatus.classList.remove('show');
                }
            });
            
            itabsPopup.addEventListener('click', function(e) {
                if (e.target === itabsPopup) {
                    closePopup();
                }
            });
            
            popupContent.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });

        async function aiGenerate() {
            const campaignUrl = document.getElementById('campaignUrl').value.trim();
            const apiKey = document.getElementById('apiKey').value.trim();
            const imageUrl = document.getElementById('imageUrl').value.trim();
            const errorMessage = document.getElementById('errorMessage');
            const loading = document.getElementById('loading');
            const loadingText = document.getElementById('loadingText');
            const aiGenerateBtn = document.getElementById('aiGenerateBtn');

            if (!campaignUrl) {
                showError('Please enter a campaign URL');
                return;
            }

            if (!apiKey) {
                showError('Please enter your Google API key. Get it FREE at aistudio.google.com/app/apikey');
                return;
            }

            if (!imageUrl) {
                showError('Please enter a product image URL');
                return;
            }

            errorMessage.classList.remove('active');
            loading.classList.add('active');
            aiGenerateBtn.disabled = true;

            try {
                // Step 1: Read URL with Jina
                loadingText.textContent = 'Reading campaign page...';
                const jinaUrl = `https://r.jina.ai/${campaignUrl}`;
                const jinaResponse = await fetch(jinaUrl);
                const pageContent = await jinaResponse.text();

                // Step 2: Send to Gemini API - FIXED
                loadingText.textContent = 'AI is writing your iTabs...';
                
                const geminiUrl = `https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent?key=${apiKey}`;
                
                const geminiResponse = await fetch(geminiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Based on this campaign/product page content, write 4 short sections for an information popup. Keep each section 2-3 sentences maximum, written in plain English that anyone can understand.

Campaign Content:
${pageContent.substring(0, 4000)}

Please respond in this exact JSON format:
{
  "section1": "What is it? (simple explanation)",
  "section2": "Why do I need it? (the problem it solves)",
  "section3": "How does it work? (simple steps)",
  "section4": "What makes it different? (unique value)",
  "buttonText": "Short call-to-action (3-5 words)",
  "buttonLink": "${campaignUrl}"
}`
                            }]
                        }]
                    })
                });

                if (!geminiResponse.ok) {
                    const errorData = await geminiResponse.json();
                    throw new Error('Gemini API error: ' + (errorData.error?.message || geminiResponse.statusText));
                }

                const geminiData = await geminiResponse.json();
                const responseText = geminiData.candidates[0].content.parts[0].text;
                
                // Extract JSON from response
                const jsonMatch = responseText.match(/\{[\s\S]*\}/);
                if (!jsonMatch) {
                    throw new Error('Could not parse AI response');
                }
                
                const aiContent = JSON.parse(jsonMatch[0]);

                // Fill in the form
                document.getElementById('section1').value = aiContent.section1;
                document.getElementById('section2').value = aiContent.section2;
                document.getElementById('section3').value = aiContent.section3;
                document.getElementById('section4').value = aiContent.section4;
                document.getElementById('buttonText').value = aiContent.buttonText;
                document.getElementById('buttonLink').value = aiContent.buttonLink;

                loading.classList.remove('active');
                aiGenerateBtn.disabled = false;
                
                document.getElementById('section1').scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                setTimeout(() => {
                    alert('✨ AI generated your iTabs! Review the sections below and click "Generate iTabs Code" when ready.');
                }, 500);

            } catch (error) {
                loading.classList.remove('active');
                aiGenerateBtn.disabled = false;
                showError('Error: ' + error.message);
                console.error(error);
            }
        }

        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            errorMessage.classList.add('active');
        }
        
        function generatePreview() {
            let imageSource = '';
            const imageWarning = document.getElementById('imageWarning');
            const imageUrlInput = document.getElementById('imageUrl');

            if (uploadedImageData) {
                imageSource = uploadedImageData;
                imageWarning.style.display = 'block';
            } else if (imageUrlInput.value.trim() !== '') {
                imageSource = imageUrlInput.value.trim();
                imageWarning.style.display = 'none';
            } else {
                alert('Please upload an image or enter an image URL');
                return;
            }

            const overlayText = document.getElementById('overlayText').value;
            const overlayPosition = document.getElementById('overlayPosition').value;
            const section1 = document.getElementById('section1').value;
            const section2 = document.getElementById('section2').value;
            const section3 = document.getElementById('section3').value;
            const section4 = document.getElementById('section4').value;
            const buttonText = document.getElementById('buttonText').value;
            const buttonLink = document.getElementById('buttonLink').value;

            if (!section1 || !section2 || !section3 || !section4) {
                alert('Please fill in all 4 sections or use AI to generate them');
                return;
            }
            
            const previewImg = document.getElementById('previewImage');
            previewImg.src = imageSource;
            
            const previewOverlay = document.getElementById('previewOverlay');
            
            if (overlayText.trim() !== '') {
                previewOverlay.textContent = overlayText;
                previewOverlay.className = 'preview-overlay show ' + overlayPosition;
            } else {
                previewOverlay.className = 'preview-overlay';
            }
            
            document.getElementById('popupSection1').textContent = section1;
            document.getElementById('popupSection2').textContent = section2;
            document.getElementById('popupSection3').textContent = section3;
            document.getElementById('popupSection4').textContent = section4;
            document.getElementById('popupButton').textContent = buttonText;
            document.getElementById('popupButton').href = buttonLink;
            
            let codeImageUrl = uploadedImageData ? 'YOUR-IMAGE-URL-HERE' : imageUrlInput.value.trim();
            const code = generateCode(codeImageUrl, overlayText, overlayPosition, section1, section2, section3, section4, buttonText, buttonLink);
            document.getElementById('codeBox').textContent = code;
            
            document.getElementById('previewSection').classList.add('active');
            document.getElementById('previewSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function generateCode(imageUrl, overlayText, overlayPosition, s1, s2, s3, s4, btnText, btnLink) {
            const positionStyles = {
                'top': 'top: 10px; left: 50%; transform: translateX(-50%);',
                'center': 'top: 50%; left: 50%; transform: translate(-50%, -50%);',
                'bottom': 'bottom: 10px; left: 50%; transform: translateX(-50%);'
            };
            
            const overlayCode = overlayText.trim() !== '' 
                ? `    <div style="position: absolute; ${positionStyles[overlayPosition]} color: white; font-weight: bold; font-size: 18px; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); padding: 10px; z-index: 10; text-align: center; width: 90%;">${overlayText}</div>\n`
                : '';
            
            return `<!-- iTabs Code - Paste this where you want the product image -->
<div style="position: relative; display: inline-block;">
    <img src="${imageUrl}" alt="Product" style="max-width: 100%; height: auto; border-radius: 8px;">
${overlayCode}    <div id="itabsBtn" style="position: absolute; top: 10px; right: 10px; width: 30px; height: 30px; background: rgba(33, 150, 243, 0.9); color: white; border: 2px solid white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.3); z-index: 20;">i</div>
</div>

<div id="itabsPopup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; padding: 20px;">
    <div id="itabsContent" style="background: white; border-radius: 8px; max-width: 500px; width: 100%; max-height: 80vh; overflow-y: auto;">
        <div style="position: sticky; top: 0; background: white; padding: 15px; border-bottom: 1px solid #eee; text-align: right;">
            <button id="itabsClose" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
        </div>
        <div style="padding: 20px; border-bottom: 1px solid #eee;">
            <h3 style="color: #2196F3; margin-bottom: 10px;">What is it?</h3>
            <p>${s1}</p>
        </div>
        <div style="padding: 20px; border-bottom: 1px solid #eee;">
            <h3 style="color: #2196F3; margin-bottom: 10px;">Why do I need it?</h3>
            <p>${s2}</p>
        </div>
        <div style="padding: 20px; border-bottom: 1px solid #eee;">
            <h3 style="color: #2196F3; margin-bottom: 10px;">How does it work?</h3>
            <p>${s3}</p>
        </div>
        <div style="padding: 20px; border-bottom: 1px solid #eee;">
            <h3 style="color: #2196F3; margin-bottom: 10px;">What makes it different?</h3>
            <p>${s4}</p>
        </div>
        <a href="${btnLink}" target="_blank" style="display: block; width: calc(100% - 40px); margin: 20px; padding: 15px; background: #4CAF50; color: white; text-align: center; text-decoration: none; border-radius: 4px; font-weight: bold;">${btnText}</a>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('itabsBtn').addEventListener('click', function() {
        document.getElementById('itabsPopup').style.display = 'flex';
    });
    
    document.getElementById('itabsClose').addEventListener('click', function() {
        document.getElementById('itabsPopup').style.display = 'none';
    });
    
    document.getElementById('itabsPopup').addEventListener('click', function(e) {
        if (e.target.id === 'itabsPopup') {
            document.getElementById('itabsPopup').style.display = 'none';
        }
    });
    
    document.getElementById('itabsContent').addEventListener('click', function(e) {
        e.stopPropagation();
    });
});
</scr` + `ipt>`;
        }
        
        function clearForm() {
            document.getElementById('campaignUrl').value = '';
            document.getElementById('apiKey').value = '';
            document.getElementById('imageFile').value = '';
            document.getElementById('imageUrl').value = '';
            document.getElementById('overlayText').value = '';
            document.getElementById('overlayPosition').value = 'center';
            document.getElementById('section1').value = '';
            document.getElementById('section2').value = '';
            document.getElementById('section3').value = '';
            document.getElementById('section4').value = '';
            document.getElementById('buttonText').value = '';
            document.getElementById('buttonLink').value = '';
            document.getElementById('previewSection').classList.remove('active');
            document.getElementById('imageWarning').style.display = 'none';
            document.getElementById('fileStatus').classList.remove('show');
            document.getElementById('errorMessage').classList.remove('active');
            uploadedImageData = null;
        }
        
        function openPopup() {
            document.getElementById('itabsPopup').classList.add('active');
        }
        
        function closePopup() {
            document.getElementById('itabsPopup').classList.remove('active');
        }
        
        function copyCode() {
            const codeBox = document.getElementById('codeBox');
            const textArea = document.createElement('textarea');
            textArea.value = codeBox.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            const successMessage = document.getElementById('successMessage');
            successMessage.classList.add('active');
            setTimeout(() => {
                successMessage.classList.remove('active');
            }, 3000);
        }
    </script>
</body>
</html>
